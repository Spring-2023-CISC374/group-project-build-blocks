import{b as p,B as b,c as v,d as f}from"./Crane.a4e637f4.js";const s=ace.edit("editor");document.getElementById("parse");ace.define("ace/mode/blocklang_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,a,n){var o=t("../lib/oop"),e=t("./text_highlight_rules").TextHighlightRules,l=function(){var r="loop\\s*",d="\\b(grab|close|release|open)\\b",g="\\b(up|down|left|right)\\b";this.$rules={start:[{token:"keyword",regex:r,next:"loop"},{token:"entity.name.function",regex:d},{token:"support.function",regex:g},{token:"keyword",regex:"endloop\\s*"}],loop:[{token:"constant.numeric",regex:"\\d+",next:"start"}]}};o.inherits(l,e),a.BlockLangHighlightRules=l});ace.define("ace/mode/blocklang",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/blocklang_highlight_rules"],function(t,a,n){var o=t("../lib/oop"),e=t("./text").Mode,l=t("./blocklang_highlight_rules").BlockLangHighlightRules,r=function(){this.HighlightRules=l,this.$behaviour=this.$defaultBehaviour};o.inherits(r,e),function(){this.lineCommentStart="//",this.getNextLineIndent=function(d,g,u){var c=this.$getIndent(g),i=g.match(/^\s*(?:loop|endloop)/);return console.log(i),i&&i[0]==="endloop"&&(c=c.substring(u.length)),i&&i[0]==="loop"&&(c+=u),c},this.$id="ace/mode/blocklang"}.call(r.prototype),a.Mode=r});ace.config.setModuleUrl("ace/mode/blocklang_highlight_rules","/path/to/blocklang_highlight_rules.js");ace.config.setModuleUrl("ace/mode/blocklang","/path/to/blocklang.js");s.session.setMode("ace/mode/blocklang");s.setOptions({enableBasicAutocompletion:[{getCompletions:(t,a,n,o,e)=>{e(null,[{value:"up",meta:"move crane up"},{value:"down",meta:"move crane down"},{value:"left",meta:"move crane left"},{value:"right",meta:"move crane right"},{value:"release",meta:"release crate"},{value:"grab",meta:"grab crate"},{value:"open",meta:"release crate"},{value:"close",meta:"grab crate"},{value:"loop ",meta:"loop N"},{value:"endloop",meta:"loop N"}])}}],enableSnippets:!0,enableLiveAutocompletion:!0});s.setTheme("ace/theme/monokai");console.log(s);s.setShowInvisibles(!0);s.resize();s.setShowPrintMargin(!1);s.setFontSize(18);function k(t){const a="&nbsp;&nbsp;&nbsp;&nbsp;";let n=0,o="",e=!0;for(let l=0;l<t.length;l++){const r=t[l];r==="("?(n++,e=!1,o+="<br>"+a.repeat(n-1)):r===")"&&(n--,e&&(o+="<br>",o+=a.repeat(n)),e=!0),o+=r}return o.trim()}async function x(){const t=s.getValue(),a=new p(t),n=new b(a),o=new v(n),e=new f(o),l=document.getElementById("errors");l.innerHTML="",n.removeErrorListeners(),n.addErrorListener({syntaxError:(d,g,u,c,i,h)=>{const m=document.getElementById("errors");m.innerHTML+=`Error: ${i} at line ${u} and column ${c}. <br>`}}),e.buildParseTrees=!0,e.removeErrorListeners(),e.addErrorListener({syntaxError:(d,g,u,c,i,h)=>{const m=document.getElementById("errors");m.innerHTML+=`Error: ${i} at line ${u} and column ${c}. <br>`}});const r=e.program();document.getElementById("output").innerHTML=k(r.toStringTree(null,e)),scene.execute(t)}document.getElementById("parse").addEventListener("click",x);
